#!/bin/bash

NAMESPACE=storj
APP=metadisk-gui
VERSION=$(git rev-parse --short HEAD)
IMAGE=$NAMESPACE/$APP
CLUSTER_HOSTS=$1

echo "Running a cluster with $1 instances..."

# Check if the docker image exists, if not, run docker.build

# Run the docker container
COUNTER=0
while [ $COUNTER -t $CLUSTER_HOSTS ]; do
  docker run -p 8080:8080 --name $APP-$COUNTER -d $IMAGE
  let COUNTER=COUNTER+1
  echo "Started instance $APP-$COUNTER from image $IMAGE"
done
